name: üêõ Bug Report
description: Reportar um bug ou comportamento incorreto
title: "[BUG]: "
labels: ["bug", "needs-triage"]
assignees: []
body:
  - type: markdown
    attributes:
      value: |
        ## üêõ Reporte de Bug
        
        Obrigado por reportar um bug! Isso nos ajuda a melhorar o COMPRAC.

  - type: dropdown
    id: severity
    attributes:
      label: Severidade
      description: Qual a severidade deste bug?
      options:
        - üî¥ Cr√≠tica (sistema inoperante, perda de dados)
        - üü† Alta (funcionalidade principal quebrada)
        - üü° M√©dia (funcionalidade afetada, workaround dispon√≠vel)
        - üü¢ Baixa (cosm√©tico, n√£o afeta funcionalidade)
    validations:
      required: true

  - type: dropdown
    id: module
    attributes:
      label: M√≥dulo Afetado
      description: Qual m√≥dulo do sistema est√° apresentando o bug?
      options:
        - Autentica√ß√£o
        - Fornecedores
        - Editais
        - Lotes
        - Demandas/Procurement
        - Secretarias (Multi-tenant)
        - OAuth
        - Auditoria
        - Relat√≥rios/Dashboard
        - Infraestrutura
        - API/Backend
        - Banco de Dados
        - Outro
    validations:
      required: true

  - type: textarea
    id: description
    attributes:
      label: Descri√ß√£o do Bug
      description: Uma descri√ß√£o clara e concisa do bug
      placeholder: O que est√° acontecendo de errado?
    validations:
      required: true

  - type: textarea
    id: steps-to-reproduce
    attributes:
      label: Passos para Reproduzir
      description: Como reproduzir o comportamento?
      placeholder: |
        1. Fa√ßa login como '...'
        2. Navegue at√© '...'
        3. Clique em '...'
        4. Veja o erro
    validations:
      required: true

  - type: textarea
    id: expected-behavior
    attributes:
      label: Comportamento Esperado
      description: O que deveria acontecer?
      placeholder: Descreva o comportamento correto esperado
    validations:
      required: true

  - type: textarea
    id: actual-behavior
    attributes:
      label: Comportamento Atual
      description: O que est√° acontecendo?
      placeholder: Descreva o comportamento incorreto observado
    validations:
      required: true

  - type: textarea
    id: error-logs
    attributes:
      label: Logs de Erro
      description: Cole aqui logs de erro relevantes
      placeholder: |
        ```
        Cole os logs aqui
        ```
      render: shell

  - type: textarea
    id: screenshots
    attributes:
      label: Screenshots / V√≠deos
      description: Se aplic√°vel, adicione screenshots ou v√≠deos do problema
      placeholder: Cole ou arraste imagens/v√≠deos aqui

  - type: dropdown
    id: environment
    attributes:
      label: Ambiente
      description: Onde o bug foi encontrado?
      options:
        - Desenvolvimento (local)
        - Homologa√ß√£o/Staging
        - Produ√ß√£o
        - Testes
    validations:
      required: true

  - type: textarea
    id: environment-details
    attributes:
      label: Detalhes do Ambiente
      description: Informa√ß√µes sobre o ambiente onde o bug ocorreu
      placeholder: |
        - OS: [ex: Ubuntu 22.04]
        - Node.js: [ex: 20.x]
        - NestJS: [ex: 10.x]
        - PostgreSQL: [ex: 15.x]
        - Docker: [ex: 24.x]
        - Browser (se aplic√°vel): [ex: Chrome 120]
    validations:
      required: false

  - type: textarea
    id: request-response
    attributes:
      label: Request/Response (APIs)
      description: Se o bug √© em uma API, forne√ßa detalhes da requisi√ß√£o e resposta
      placeholder: |
        **Request:**
        ```http
        POST /api/endpoint
        Content-Type: application/json
        
        {
          "data": "example"
        }
        ```
        
        **Response:**
        ```json
        {
          "error": "message"
        }
        ```
      render: shell

  - type: dropdown
    id: user-role
    attributes:
      label: Perfil de Usu√°rio
      description: Com qual perfil o bug foi encontrado?
      options:
        - SEICT_ADMIN (Administrador SEICT)
        - SECRETARIA_ADMIN (Administrador de Secretaria)
        - GESTOR (Gestor de Secretaria)
        - FORNECEDOR (Fornecedor)
        - N√£o autenticado
        - Outro
    validations:
      required: false

  - type: textarea
    id: workaround
    attributes:
      label: Workaround
      description: Existe alguma solu√ß√£o tempor√°ria?
      placeholder: Descreva qualquer workaround conhecido

  - type: textarea
    id: additional-context
    attributes:
      label: Contexto Adicional
      description: Qualquer outra informa√ß√£o relevante sobre o problema
      placeholder: |
        - Quando o bug come√ßou a ocorrer?
        - Acontece sempre ou intermitentemente?
        - Afeta todos os usu√°rios ou apenas alguns?

  - type: dropdown
    id: regression
    attributes:
      label: Regress√£o?
      description: Este bug foi introduzido recentemente?
      options:
        - Sim, funcionava antes
        - N√£o, nunca funcionou
        - N√£o sei
    validations:
      required: false

  - type: textarea
    id: references
    attributes:
      label: Refer√™ncias
      description: Links para PRs, commits ou issues relacionadas
      placeholder: |
        - PR que pode ter introduzido o bug: #123
        - Issue relacionada: #456
        - Commit: abc123

  - type: checkboxes
    id: checklist
    attributes:
      label: Checklist
      options:
        - label: Verifiquei que este bug n√£o est√° duplicado em outra issue
          required: true
        - label: Testei em ambiente atualizado
          required: true
        - label: Inclu√≠ informa√ß√µes suficientes para reproduzir o bug
          required: true
